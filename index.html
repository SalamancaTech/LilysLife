<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lily's Life v7</title>
    <link rel="stylesheet" href="style.css">
    <!-- Tailwind CSS for rapid utility styling (Optional, but good for layout) -->
    <!-- We will rely on custom CSS to match your existing aesthetic -->
</head>
<body>
    <div id="stat-tooltip" class="hidden"></div>
    <div id="menu-button">
        <div class="hamburger-icon">
            <span></span>
            <span></span>
            <span></span>
        </div>
        <div class="close-icon">&times;</div>
    </div>

    <!-- 1. Prompt Bar -->
    <div id="prompt-bar">
        <input type="text" id="prompt-input" placeholder="What does Lily do?">
        <button id="send-prompt">ACT</button>
    </div>

    <!-- 2. Visuals -->
    <div id="character-image">
        <!-- Dynamic Character Portrait -->
    </div>
    <div id="location-image">
        <!-- Dynamic Location Background -->
    </div>
    <div id="npc-image">
        <!-- Dynamic NPC Overlay -->
    </div>

    <!-- 5. V7 Stats Dashboard -->
    <div id="stats">
        <div class="stats-wrapper">
            <!-- SECTION 1: THE TANKS (Resources 0-100) -->
            <div class="tanks-container">
                <div class="stat-group-title">THE TANKS</div>
                
                <div class="stat-bar horizontal" id="stat-vitality" data-tooltip="Vitality (Health/Energy)">
                    <div class="stat-label">VIT</div>
                    <div class="bar-track"><div class="bar-fill"></div></div>
                    <div class="stat-value">100</div>
                </div>

                <div class="stat-bar horizontal" id="stat-composure" data-tooltip="Composure (Social Health)">
                    <div class="stat-label">CMP</div>
                    <div class="bar-track"><div class="bar-fill"></div></div>
                    <div class="stat-value">100</div>
                </div>

                <div class="stat-bar horizontal" id="stat-sync" data-tooltip="Synchronization (Pilot Connection)">
                    <div class="stat-label">SNC</div>
                    <div class="bar-track"><div class="bar-fill"></div></div>
                    <div class="stat-value">50</div>
                </div>
            </div>

            <!-- SECTION 2: THE PENTAGRAM (Attributes 1-10) -->
            <div class="attributes-container">
                <div class="stat-group-title">THE PENTAGRAM</div>
                
                <div class="hex-grid">
                    <div class="stat-hex" id="stat-will" data-tooltip="WILL (Force/Boundaries)">
                        <div class="hex-icon">üõ°Ô∏è</div>
                        <div class="hex-val">5</div>
                        <div class="hex-label">WILL</div>
                    </div>
                    <div class="stat-hex" id="stat-grace" data-tooltip="GRACE (Coordination/Etiquette)">
                        <div class="hex-icon">ü¶¢</div>
                        <div class="hex-val">5</div>
                        <div class="hex-label">GRACE</div>
                    </div>
                    <div class="stat-hex" id="stat-wit" data-tooltip="WIT (Logic/Observation)">
                        <div class="hex-icon">üëÅÔ∏è</div>
                        <div class="hex-val">5</div>
                        <div class="hex-label">WIT</div>
                    </div>
                    <div class="stat-hex" id="stat-heart" data-tooltip="HEART (Empathy/Connection)">
                        <div class="hex-icon">üíö</div>
                        <div class="hex-val">5</div>
                        <div class="hex-label">HEART</div>
                    </div>
                    <div class="stat-hex" id="stat-flair" data-tooltip="FLAIR (Drama/Visibility)">
                        <div class="hex-icon">‚ú®</div>
                        <div class="hex-val">5</div>
                        <div class="hex-label">FLAIR</div>
                    </div>
                </div>
            </div>
            
            <!-- SECTION 3: ENVIRONMENTAL -->
            <div class="env-container">
                 <div class="stat-bar vertical" id="stat-temperature" data-tooltip="Temperature">
                    <div class="bar-track"><div class="bar-fill"></div></div>
                    <div class="stat-icon">üå°Ô∏è</div>
                </div>
            </div>
        </div>
    </div>

    <!-- 6. V7 Intent Matrix -->
    <div id="intent-matrix">
        <div class="matrix-header">
            <span id="active-intent-display">INTENT: ENGAGE</span>
            <span class="separator">|</span>
            <span id="active-stance-display">STANCE: NEUTRAL</span>
        </div>
        
        <div class="matrix-body">
            <!-- Left: Intent Selector (The Goal) -->
            <div class="intent-selector">
                <div class="selector-label">GOAL</div>
                <div class="intent-grid">
                    <button class="matrix-btn intent-btn selected" data-value="ENGAGE">ENGAGE</button>
                    <button class="matrix-btn intent-btn" data-value="ACT">ACT</button>
                    <button class="matrix-btn intent-btn" data-value="DEFLECT">DEFLECT</button>
                    <button class="matrix-btn intent-btn" data-value="OBSERVE">OBSERVE</button>
                    <button class="matrix-btn intent-btn" data-value="PROVOKE">PROVOKE</button>
                    <button class="matrix-btn intent-btn" data-value="SOOTHE">SOOTHE</button>
                    <button class="matrix-btn intent-btn" data-value="CHARM">CHARM</button>
                </div>
            </div>

            <!-- Right: Stance Selector (The Delivery) -->
            <div class="stance-selector">
                <div class="selector-label">DELIVERY</div>
                <div class="stance-grid">
                    <!-- Will -->
                    <button class="matrix-btn stance-btn" data-stat="will" data-value="STOIC">STOIC</button>
                    <button class="matrix-btn stance-btn" data-stat="will" data-value="COMMANDING">COMMANDING</button>
                    <!-- Grace -->
                    <button class="matrix-btn stance-btn" data-stat="grace" data-value="DEMURE">DEMURE</button>
                    <button class="matrix-btn stance-btn" data-stat="grace" data-value="ELEGANT">ELEGANT</button>
                    <!-- Wit -->
                    <button class="matrix-btn stance-btn" data-stat="wit" data-value="CRYPTIC">CRYPTIC</button>
                    <button class="matrix-btn stance-btn" data-stat="wit" data-value="SHARP">SHARP</button>
                    <!-- Heart -->
                    <button class="matrix-btn stance-btn" data-stat="heart" data-value="SINCERE">SINCERE</button>
                    <button class="matrix-btn stance-btn" data-stat="heart" data-value="NURTURING">NURTURING</button>
                    <!-- Flair -->
                    <button class="matrix-btn stance-btn" data-stat="flair" data-value="MYSTERIOUS">MYSTERIOUS</button>
                    <button class="matrix-btn stance-btn" data-stat="flair" data-value="BOLD">BOLD</button>
                    <!-- Special -->
                    <button class="matrix-btn stance-btn special" data-value="AWKWARD">AWKWARD</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 7. Player Options (Generated) -->
    <div id="player-options">
        <button id="player-options-submit">COMMIT</button>
        <div id="player-options-cells-container">
            <!-- Dynamic AI Suggestions will go here -->
            <div class="player-option-cell placeholder">Options will appear here...</div>
        </div>
    </div>

    <!-- 8. Narrative Output -->
    <div id="narrative-output">
        <p class="system-message">INITIALIZING V7 KERNEL...</p>
        <p class="system-message">LOADING "LILY" PROFILE...</p>
        <p class="system-message">ESTABLISHING CONNECTION WITH DELILAH...</p>
        <br>
        <p>Welcome back, Architect. The system is live. Where shall we begin?</p>
    </div>

    <!-- 9/10. Counters -->
    <div id="event_counter">Turn: 1</div>
    <div id="segment_counter">08:00 AM</div>

    <!-- 11. Menu & Settings (Hidden) -->
    <div id="menu-screen" class="hidden">
        <div id="settings_module">
            <h2>System Settings</h2>
            <!-- Standard settings code here (simplified for brevity) -->
            <div class="settings-section">
                <h3>API</h3>
                <input type="password" id="api-key-input" placeholder="Enter Gemini API Key">
                <button id="save-api-key">Initialize</button>
            </div>
        </div>
    </div>
    
    <div id="menu-options" class="hidden">
        <div class="icon" id="settings-icon">‚öôÔ∏è</div>
    </div>

    <script type="module">
        import { GoogleGenerativeAI } from "https://esm.run/@google/generative-ai";
        window.GoogleGenerativeAI = GoogleGenerativeAI;
    </script>
    <script src="script.js"></script>
</body>
</html>